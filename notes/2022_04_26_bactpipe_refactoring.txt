Date: 2022-04-26
User: jevgen01
Scope: Refactoring pipeline according to agnostic-specific concept

AGNOSTIC RULES
    1. Demultiplexing
    2. Read QC
        2.1. Length trimming : fastp - singularity
        2.2. Quality trimming : fastp - singularity
        2.3. AQUAMIS - git repo
    3. Host filtering : kraken2/hg38(To be updated to CHM13 : https://www.science.org/doi/10.1126/science.abj6987)
    4. De novo assembly
        4.1. Contig assembly : shovill - singularity
        4.2. Contig QC : quast - singularity
    5. Taxonomic classification : kraken2 - conda env
        5.1. Post-QC reads
        5.2. Contigs
    6. MLST Sequence typing : mlst - singularity
    7. AMR identification
        7.1. Raw reads : Resfinder
        7.2. Contigs : RGI - conda env
        7.2. Metagenomic samples : AMR++
    8. Plasmid analysis : MOB Suite
        8.1. Plasmid reconstruction
        8.2. Plasmid annotation


SPECIFIC RULES
    1. Salmonella
        1.1. Serotyping
            1.1.1. Post-QC reads : Seqsero - singularity
            1.1.2. Contigs : SISTR - singularity
    2. H.influenzae
    3. L.monocytogenes
        3.1. Molecular serogrouping
            3.1.1. Contigs : Lissero - singularity
        3.2. MLST with Pasteur institute database
            3.1.1. Contigs : Institute Pasteur REST API - python script
    4. N.meningitidis
    5. Legionella
    6. MTB
    7. Klebsiella
    8. S.aureus
    9. Str.pyogenes
    10. N.gonorrhoeae
    ...

AGNOSTIC REPORT
SPECIFIC REPORT
SUMMARY REPORT

FILE LIFE CYCLE
    bcl - store
    raw_fastq - store
    post_qc_fastq - remove
    fastp reports - store
    AQUAMIS report + files - store
    AQUAMIS intermediate files - remove
    kraken2 - host filtering report - store
    host-filtered reads - store
    kraken2 - classification(reads, contigs) reports - store
    mlst output - store
    RGI output - store
    Resfinder output - store
    AMR++ output - store



